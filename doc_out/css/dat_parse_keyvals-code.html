<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.6.1 on Thu Aug 18 11:37:50 2016 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>dat_parse_keyvals.pro (OMINAS API Documentation)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="dat_parse_keyvals.pro (OMINAS API Documentation)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">;=============================================================================</span>
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;	dat_parse_keyvals</span>
<span class="comments">;</span>
<span class="comments">;</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;	Parses an array strings containing keyword=value pairs.</span>
<span class="comments">;</span>
<span class="comments">;</span>
<span class="comments">; CATEGORY:</span>
<span class="comments">;	NV/SYS</span>
<span class="comments">;</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;	kv = dat_parse_keyvals(keyvals)</span>
<span class="comments">;</span>
<span class="comments">;</span>
<span class="comments">; ARGUMENTS:</span>
<span class="comments">;  INPUT:</span>
<span class="comments">;	keyvals:	Array of strings of the form &lt;keyword>=&lt;value>.</span>
<span class="comments">;</span>
<span class="comments">;  OUTPUT:</span>
<span class="comments">;</span>
<span class="comments">;</span>
<span class="comments">; KEYWORDS:</span>
<span class="comments">;  INPUT: NONE</span>
<span class="comments">;</span>
<span class="comments">;  OUTPUT: </span>
<span class="comments">;	keywords:	Array of keywords.</span>
<span class="comments">;</span>
<span class="comments">;</span>
<span class="comments">; RETURN: </span>
<span class="comments">;	Array of type keyval_struct containing the parsed keywords</span>
<span class="comments">;	and values.  One element per input array element.</span>
<span class="comments">;</span>
<span class="comments">;</span>
<span class="comments">; STATUS:</span>
<span class="comments">;	Complete</span>
<span class="comments">;</span>
<span class="comments">;</span>
<span class="comments">; MODIFICATION HISTORY:</span>
<span class="comments">; 	Written by:	Spitale</span>
<span class="comments">;	</span>
<span class="comments">;-</span>
<span class="comments">;=============================================================================</span>
<a id="dat_parse_keyvals:source"></a>function dat_parse_keyvals, keyvals, keywords=keywords
@core.include

 s = size(keyvals)
 ntran = s[1]
 max_nkey = s[2]

 kv = {keyval_struct}
 kv.keywords_p = nv_ptr_new(ptrarr(ntran))
 kv.values_p = nv_ptr_new(ptrarr(ntran))

 for i=0, ntran-1 do $
  begin
   w = where(keyvals[i,*] NE '')
 
   if(w[0] NE -1) then $
    begin
     nkey = n_elements(w)
     (*kv.keywords_p)[i] = nv_ptr_new(strarr(nkey))
     (*kv.values_p)[i] = nv_ptr_new(strarr(nkey))
     for j=0, nkey-1 do $
      begin
       dat_parse_keyval, keyvals[i,j], keyword, value
       keywords = append_array(keywords, keyword)

       (*(*kv.keywords_p)[i])[j] = keyword
       (*(*kv.values_p)[i])[j] = value
      end
    end
  end


<span class="comments">; return, nv_ptr_new(kv)</span>
 return, kv
end
<span class="comments">;=============================================================================</span>
</code>
    </div>
  </body>
</html>