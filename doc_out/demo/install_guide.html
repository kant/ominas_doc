<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.6.1 on Thu Dec 15 11:35:56 2016 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>install_guide.pro (OMINAS API Documentation)</title>

    

    <script type="text/javascript" src="idldoc-resources/js/jquery.js"></script>
    <script type="text/javascript" src="idldoc-resources/js/copybutton.js"></script>

    
    <style type="text/css" media="all">
            /* setup page */
      body { font-family: Helvetica, sans-serif; font-size: 12pt; margin: 0; padding: 0; }
      div.content { padding: 1em; }
      p { line-height: 1.4; }
      td p { padding-bottom: 0.5em; }
      img { border: 0; }
      
      /* link styles */
      a { text-decoration: none; }
      a:link, a:visited { color: #0000FF; }
      a:hover, a:focus { background: yellow; border-bottom: 1emx dotted #303099; }
      
      /* dir-overview styles */
      dt.filename { margin-top: 0.5em; }
      dl.file_listing { margin-left: 1em; }
      
      /* titles */
      h1, h2, h3, h4 { font-weight:normal; color: #871E31; margin-top: 1.5em; }
      h4 { margin-bottom: 0.25em; }
      .center { margin-left: auto; margin-right: auto; }
      .small { font-family: Verdana, Helvetica, sans-serif; font-size: 90%; }
      .smaller { font-family: Verdana, Helvetica, sans-serif; font-size: 80%; }
      .smallest { font-family: Verdana, Helvetica, sans-serif; font-size: 70%; }
      h1.basename { margin-top: 0; margin-bottom: 0; }
      h1.basename span.file-attributes { font-size: 70%; margin-left: 3em; color: #384806; }
      h2.directory { font-size: 90%; margin-bottom: 0; }
      h2.routine-name { margin-top: 0; margin-bottom: 0; }
      p.categories { color: #384806; margin-top: 0; }
      span.file_attribute { float: right; color: #384806; margin: 0 0 1em 3em; }
      div#file_comments { margin-top: 1em; }
      
      div.routine-details { border: 1px dotted #C0C0C0; margin-top: 1em; padding: 1em; }
      span.routine-attributes { font-size: 70%; margin-left: 3em; color: #384806; }
      div.details dt { color: #871E31; margin-left: 2em; }
      div.details dt span { color: #384806; margin-left: 2em; }
      div.details dd { margin: 0.5em 2em 1em 4em; }
      a.top {
        font-family: Verdana, Helvetica, sans-serif;
        font-size: 8pt;
        font-weight: bold;
        color: #5070ff;
        text-transform: uppercase;
        float: right;
        margin-left: 1em;
      }
      
      /* comments */
      .pre { white-space: pre; }
      
      /* code styles */
      code { font-family: Monaco, "Courier New", Courier, monospace; font-size: 95%; }
      code.listing { white-space: pre; display: block; margin: 0.75em 0 0.75em 0; padding: 0 3em 0 1em; line-height: 1.4em; }
      code.source { white-space: pre; display: block; }
      code.source span.comments { color: #408080; }
      .syntax { margin-top: 1em; margin-left: 1.5em; text-indent: -1.5em; }
      .var { font-style: italic; }
      .argument { } /* white-space: nowrap; does not work in Safari (and sometimes not even in Firefox) */
      
      dl.routine-summary dt { margin-bottom: 0.25em; }
      dl.routine-summary dd { margin-bottom: 0.5em; margin-left: 2em; }
      
      ul.inherited-method-summary { padding-left: 0em; margin-left: 0em; }
      
      /* general styles */
      ul li { list-style-type: none; }
      table { empty-cells: show; }
      thead { color: #871E31; }
      dd { margin-bottom: 0.35em; }
      input, textarea { background: #F3F6ED; border: #E1D6C6 1px solid; padding: 2px 1em 2px 0.5em; }
      input.text { background: #FFFFC0; }
      
      div.note { margin: 1em 2em 1em 2em; background: #EFEFEF; border: 1px #A0A0A0 dotted; padding: 0 1em 0 1em; }
      p.indent { margin-left: 2em; }
      
      /* An attribute table is a vertical list of name-value pairs. */
      table.box {
        background: #EFEFEF;
        border: 1px #A0A0A0 dotted;
        padding-top: 0.75em;
        padding-bottom: 0.75em;
      }
      table.attribute { padding-left: 0.75em; padding-right: 0.75em; }
      table td { vertical-align: top; }
      table.attribute p { margin: 0; }
      table td.name { font-style: normal; padding-right: 1.5em; }
      ul.fieldslist { padding-top: 0; color: #909090; }
      ul.fieldslist li { margin-bottom: 0.25em; }
      span.fieldname { color: #000000; }
      
      dl.attribute dt { color: #990000; }
      
      /* header/navbar styles */
      div.header { padding: 2em 2em 0 2em; background: #9E9D7B; border-bottom: 2px #262626 solid; }
      div.header h1 { color: white; margin:0; font-weight: normal; }
      div.header h2 { color: white; margin-top: 0; margin-bottom: 1em; font-weight: normal; font-style: italic; font-size: 100%; }
      table.navbar { background: #CCC097; margin: 0; padding: 0; border-bottom: 1px #262626 dotted; width: 100%; }
      table.navbar td { padding: 4px 0.5em 3px 0.5em; white-space: nowrap; vertical-align: top; }
      table.navbar td.flexible { width: 100%; text-align: right; padding-right: 1em; white-space: nowrap; }
      table.navbar td.selected { background: #262626; }
      table.navbar td.selected, table.navbar td.selected a { color: white; }
      table.navbar a:hover, table.navbar a:focus { background: inherit; border-bottom: 1px solid #303099; }
      p.localnavbar { text-align: right; margin: 0.2em 1em 0.2em 0.2em; padding: 0; }
      
      /* CSS graphics styles */
      div.box {
        margin-left: 0.25em;
        display: inline-block;
        width: 0.9em;
        height: 0.9em;
        vertical-align: -1px;
      }
      .red { background-color: #A00; }
      .orange { background-color: #F40; }
      .green { background-color: #480; }
      
      /* index styles */
      span.index_type { margin-left: 1em; }
      dl.index_listing dd { margin-bottom: 0.5em; margin-left: 2em; }
      dl.index_listing dd p { margin-top: 0.2em; margin-bottom: 0em; }
      
      /* search styles */
      fieldset { border: #ddd 1px solid; padding: 1em; margin-top: 3em; }
      legend { color: #871E31; font-size: 120%; }
      label { white-space: nowrap; }
      p.description { margin: 2em 2em 1em 2em; }
      form table td.name { vertical-align: middle; }
      
      /* footer styles */
      div.footer { padding: 0.5em 1em 0.5em 1em; background: #EFEFEF; border-top: 1px #A0A0A0 dotted; }
      div.footer table { width: 100%; }
      div.footer td.right { text-align: right; }

    </style>
    <style type="text/css" media="print">
            p.localnavbar { display: none; }
      
      div.header { background: white; }
      div.header h1 { color: black; }
      div.header h2 { color: black; }

    </style>
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="install_guide.pro (OMINAS API Documentation)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">

    <div class="header">
      <h1>OMINAS API Documentation</h1>
      <h2>Generated by IDLdoc</h2>
    </div>
    
    
    <table class="navbar smaller" summary="Navigation header" cellspacing="0">
      <tr>
        <td >
          <a href="overview.html">Overview</a>
        </td>
    
        <td >
          Directory
        </td>
    
        <td class="selected">File</td>
    
        
        <td >
          <a href="install_guide-code.html" title="Chromocoded source">Source</a> <a href="install_guide.pro" title=".pro file"><img src="idldoc-resources/attach.png" alt="[attach.png]" align="top"/></a>
        </td>
        
    
        <td >Etc</td>
    
        <td >
          <a href="categories.html">Categories</a>
        </td>
    
        <td >
          <a href="search.html">Search</a>
        </td>
    
        
        <td >
          <a href="idldoc-index.html">Index</a>
        </td>
        
    
        
        <td >
          <a href="idldoc-warnings.html">Warnings</a>
        </td>
        
    
        <td >
          <a href="idldoc-help.html">Help</a>
        </td>
    
        <td class="flexible">
          Developer documentation
        </td>
      </tr>
    </table>
    
    
    
    <p class="localnavbar smallest"><a href="" target="_top">single page</a> | <a href="index.html" target="_top">use frames</a> &nbsp;&nbsp;&nbsp; summary &nbsp;&nbsp;&nbsp; class &nbsp;&nbsp;&nbsp; fields &nbsp;&nbsp;&nbsp; <a href="#routine-details">routine details</a> &nbsp;&nbsp;&nbsp; <a href="#attributes">file attributes</a></p>
    
    
    
    
    
    
    
    
    

    <div class="content">
      <h2 class="directory">./</h2>
      <h1 class="basename">install_guide.pro<span class="file-attributes"></span></h1>
      

      
      
      
      <br/>

      
      <div id="file_comments">
        <div class="small "><h1>	User Installation Guide</h1>

<p>	This guide will cover the installation of OMINAS and common issues with
	configuration, as well as present some common errors and possible
	solutions. Please see the section entitled <code>Troubleshooting</code> for more
	information regarding installation issues with OMINAS.
</p>

<h1>	Requirements</h1>

<p>	To process images from a particular mission, that mission's kernels will
	need to be downloaded separately from the
	<a href="http://naif.jpl.nasa.gov/pub/naif/">NAIF website</a>. A set of kernels can
	be obtained using the UNIX wget or rsync commands, as desired.It is
	recommended to download the set of
	<a href="http://naif.jpl.nasa.gov/pub/naif/generic_kernels/">generic_kernels</a> to
	supplement kernels from other missions.
</p>

<p>	OMINAS makes use of the NAIF Icy Toolkit to process SPICE kernels. The Icy
	toolkit may optionally be obtained manually from
	<a href="https://naif.jpl.nasa.gov/naif/toolkit_IDL.html">NAIF</a>. However, the
	installer utility provided with OMINAS can download and compile Icy
	automatically. Installation of Icy is somewhat platform-dependent, so
	troubleshooting information can be found in <code>Troubleshooting</code>.
</p>

<h1>	Procedure</h1>

<p>	1. Please ensure that OMINAS has been properly downloaded from the
	<a href="https://github.com/ppenteado/ominas">Github repository</a> by entering
	the following command at the terminal:
<div><div><code class="listing"><span class="code-output"> git clone https://github.com/ppenteado/ominas</span>
</code></div></div>	A local copy of the OMINAS source will be cloned automatically.
</p>

<p>	2. Configuration of OMINAS should be performed using the configuration
	script, configure.sh, which is located in the top-level ominas directory.
	This script can be run from the command line with:
<div><div><code class="listing"><span class="code-output"> source configure.sh</span>
</code></div></div>	3. A prompt will appear asking which packages should be installed. The
	user should type the numbers of the desired packages separated by spaces.
	If no packages are desired, the default package can be installed by typing
	"def". Star catalogs or SEDR data may be configured without installing
	packages. If no modifications to the package configuration are desired,
	the "no" keyword skips this step.
</p>

<p>	4. Enter the location of the mission kernel pool for each desired
	mission package. If the location is not known, or there is a typo,
	the utility will attempt to find the kernel pool automatically by using
	the default name in the NAIF archive (e.g., Cassini kernels are stored
	in a folder called Cassini).
</p>

<p>	5. The installer will optionally attempt to install the Icy Toolkit from
	the internet automatically. If a local copy of Icy is present, its
	location may be entered manually or detected automatically. Once Icy
	is installed, this step does not need to be performed again if further
	modifications to the OMINAS configuration are desired.
</p>

<p>	6. Test the install of OMINAS has been completed correctly by running the
	the following example scripts:
<div><div><code class="listing"><span class="code-output"> idl saturn_example.pro</span>
<span class="code-output"> idl jupiter_example.pro</span>
</code></div></div>	7. A successful Icy installation can be tested with the following IDL
	command:
<div><div><code class="listing"><span class="code-output"> help, 'icy', /dlm</span>
</code></div></div>	Some text on the installed version of Icy should be displayed. Additionally,
	use the following command:
<div><div><code class="listing"><span class="code-output"> print, cspice_tkvrsn('TOOLKIT')</span>
</code></div></div>	The version of Icy should be printed. If both of these functions return
	successfully, then Icy has been installed correctly.
</p>

<h1>	Note: Demo</h1>

<p>	If the demo configuration is set for OMINAS, no other types of images can
	be processed other than the example scripts. To change this setting at a
	later point, run the uninstall.sh script to unconfigure OMINAS, then run
	configure.sh again, selecting not to configure the demo.
</p>

<p>	Alternatively, the following information can be changed in the
	<code>~/.bash_profile' or '~/.bashrc' file:</code>
<div><div><code class="listing"><span class="code-output"> DFLAG=true; source &lt;...&gt;</span>
</code></div></div>	where &lt;...&gt; is the rest of the line. This line should be changed to:
<div><div><code class="listing"><span class="code-output"> DFLAG=false; source &lt;...&gt;</span>

</code></div></div></p>

<h1>	Troubleshooting</h1>

<p>	This section outlines several common sources of error which are due to
	OMINAS not being configured correctly.
</p>

<p>	One of the most common configuration problems manifests as this error:
<div><div><code class="listing"><span class="code-output"> % CSPICE_STR2ET: SPICE(NOLEAPSECONDS): [str2et_c-&gt;STR2ET-&gt;TTRANS] The variable that points to the leapseconds (DELTET/DELTA_AT)</span>
<span class="code-output">                 could not be located in the kernel pool.  It is likely that the leapseconds kernel has not been loaded via</span>
<span class="code-output">                 the routine FURNSH.</span>
</code></div></div>	This error comes from the Icy toolkit. It specifically refers to the Leap
	Second Kernel file, however, as the lsk is usually the first kernel which
	is loaded, this error generally means that no kernels are being loaded.
</p>

<p>	You can check which kernels have been loaded by entering the following
	IDL commands:
<div><div><code class="listing"><span class="code-output"> cspice_ktotal, 'ALL', count</span>
<span class="code-output"> for i=0,count-1 do begin & cspice_kdata,i,'ALL',file,type,source,handle,found & print,i,file & endfor</span>
</code></div></div>	A list will be populated with the currently loaded SPICE kernels, and
	their load order. If no kernels are loaded, then it is likely that a bad
	path was supplied to the kernel pools. Ensure that the kernel pool was
	successfully entered into the environemnt by using the "env" command at
	the terminal prompt. The kernel pool variable names follow a convention
	like so: &lt;MIS&gt;_SPICE_&lt;*K&gt;, where &lt;MIS&gt; is the abbreviated mission name,
	and &lt;*K&gt; is the type of kernel. Therefore, for Cassini, the bash command:
<div><div><code class="listing"><span class="code-output"> env | grep CAS_SPICE</span>
</code></div></div>	will list the path to directories containing each type of Cassini kernel.
	If the variables are not present, then run the de-configuring utility, in
	the ominas folder:
<div><div><code class="listing"><span class="code-output"> source uninstall.sh</span>
</code></div></div>	Then run the configuration utility again. Any custom path name supplied to
	the configuration utility must be spelled correctly.
</p>

<p>	If the kernel environment variables are present, next check that the kernel
	list contains the correct kernels. The kernel list file manually specifies
	which kernels should be loaded in place of the OMINAS auto-detect
	functionaliy. For Cassini, as an example, this file is located in
	'ominas/config/cas/cassini.kernels'. At the beginning of this file, after
	the header comments, check that the following line is present:
<div><div><code class="listing"><span class="code-output"> $CAS_SPICE_LSK/naif00xx.tls</span>
</code></div></div>	where xx is the number of the most recent leap second kernel file.
</p>

<p>	If no SPK kernels are loaded, the following error will be returned by Icy:
<div><div><code class="listing"><span class="code-output"> % CSPICE_SPKGEO: SPICE(NOLOADEDFILES): [spkgeo_c-&gt;SPKGEO-&gt;SPKSFS] At least one SPK file needs to be loaded by SPKLEF before</span>
<span class="code-output">                 beginning a search.</span>
</code></div></div>	The SPK kernels must be loaded from a mission kernel list. If they are not
	being loaded correctly, then the kernel list is not being read as expected,
	usually this is due to an incorrect kernel list path.
</p>

<p>	In some cases, a demo script will run and no error will appear to occur,
	but no pointing will be overlayed on the image. This error generally occurs
	due to the PCK kernels not being loaded or the CK kernels not being loaded
	in the correct order.
</p>

<p>	When the frame kernel (FK) is not being loaded correctly for an image,
	Icy will return the following error:
<div><div><code class="listing"><span class="code-output"> % CSPICE_PXFORM: SPICE(EMPTYSTRING): [pxform_c] String "from" has length zero.</span>
</code></div></div>	This error can be corrected by adding the following line to the kernel
	list, after the LSK kernel line, in this example for Cassini:
<div><div><code class="listing"><span class="code-output"> $CAS_SPICE_FK/cas_iss_vXX.tf</span>
</code></div></div>	where XX is the most recent FK version.
</p>

<p>	Occasionally, in the course of modifying the OMINAS configuration without
	performing a fresh uninstall and reconfigure, the "load order" of the
	packages may be incorrect. When running a demo, the following error may
	occur:
<div><div><code class="listing"><span class="code-output"> % Illegal variable attribute: POINTS_P.</span>
</code></div></div>	This can be corrected either by running the uninstall script, and then
	the configuration script, or manually by editing the bash_profile or
	bashrc for the user account:
<div><div><code class="listing"><span class="code-output"> vim ~/.bash_profile</span></code></div></div>	After editing the file to ensure that ominas_env_def.sh is the first file
	which is loaded, refresh the profile:
<div><div><code class="listing"><span class="code-output"> . ~/.bash_profile</span>

</code></div></div>	If Icy is not installed, and a script is run, something similar to the
	following error may occur:
<div><div><code class="listing"><span class="code-output"> % Attempt to call undefined procedure: 'CSPICE_STR2ET'.</span>
</code></div></div>	In general, the undefined procudure may have any cspice prefix. Icy is
	either not configured correctly, or not installed. In IDL, check that
	the Icy path has been added to the IDL path as follows:
<div><div><code class="listing"><span class="code-output"> path = pref_get('IDL_PATH')</span>
<span class="code-output"> print, path</span>
<span class="code-output"> dlm_path = pref_get('IDL_DLM_PATH')</span>
<span class="code-output"> print, dlm_path</span>
</code></div></div>	The path variable should appear as a colon-separated list with
	&lt;IDL_DEFAULT&gt; as the first entry. Check that both Icy and OMINAS
	directories are added to the IDL_PATH, and that Icy is added to the
	IDL_DLM_PATH. If Icy is not present in the list, it can be added with
	these IDL commands:
<div><div><code class="listing"><span class="code-output"> path = path + ':+path/to/icy'</span>
<span class="code-output"> pref_set, 'IDL_PATH', path, /commit</span>
<span class="code-output"> dlm_path = dlm_path + ':+path/to/icy'</span>
<span class="code-output"> pref_set, 'IDL_DLM_PATH', dlm_path, /commit</span>
</code></div></div>	You must exit and restart IDL for these changes to take effect.
</p>

<p>	When the incorrect kernels are being loaded, an error like this may appear,
	this particular error comes from mosaic_example.pro:
<div><div><code class="listing"><span class="code-output"> % Variable is undefined: MU0.</span>
<span class="code-output"> % Execution halted at: PG_PHOTOM_GLOBE   159 path/to/ominas/nv/com/pg/pg_photom_globe.pro</span>
<span class="code-output"> %                      PG_PHOTOM          99 path/to/ominas/nv/com/pg/pg_photom.pro</span>
<span class="code-output"> %                      $MAIN$</span>
</code></div></div>	This error occurs when the incorrect kernel list is being used. Generally,
	when processing a Cassini or other mission image, the demo should be turned
	off through the configuration utility. If it is on, the demo kernel list
	will be called, along with the demo translator. This setup will prevent
	OMINAS from auto-detecting the correct kernels to load for the image.
</p>

<p>	A simple mistake that might be made can manifest in the following manner:
<div><div><code class="listing"><span class="code-output"> -1</span>
<span class="code-output"> % Variable is undefined: DD.</span>
</code></div></div>	Note that OMINAS batch scripts must be opened from the directory from
	which they are located.
</p>

<p></p>

</div>
      </div>
      

      

      

      

      

      
      <div>
        <h2>Routines</h2>
        

      

      

      
      </div>
      

      
      <div id="routine-details">
        

        
        <div class="routine-details details" id="install_guide">
          <h2 class="routine-name"><a href="#root" class="top">top</a> <a href="install_guide-code.html#install_guide:source" class="top">source</a> install_guide<span class="routine-attributes"></span></h2>

          

          <p class="syntax"><code>install_guide</code></p>

          

          

          

          

          

          

          

          
          <h3>Statistics</h3>

            <table class="attribute small" summary="Routine statistics">
              <tr>
                <td class="name">Lines:</td>
                <td><div class="box green"></div> 2 lines</td>
              </tr>

              <tr>
                <td class="name">Cyclomatic complexity:</td>
                <td><div class="box green"></div> 1</td>
                <tr>
                  <td class="name">Modified cyclomatic complexity:</td>
                  <td><div class="box green"></div> 1</td>
              </tr>
            </table>
          

        </div>
        

      </div>
      

      <div id="attributes">
        <h2>File attributes</h2>

        <table class="attribute small" summary="File attributes">
          <tr>
            <td class="name">Modification date:</td>
            <td>Mon Nov 21 13:53:21 2016</td>
          </tr>

          <tr>
            <td class="name">Lines:</td>
            <td>2</td>
          </tr>

          
          <tr>
            <td class="name">Docformat:</td>
            <td>rst rst</td>
          </tr>
          
        </table>
      </div>

      
    </div>

    <div class="footer">
    
      <table class="smaller" summary="footer">
        <tr>
          <td class="left">Produced by IDLdoc 3.6.1 on Thu Dec 15 11:35:56 2016</td>
          <td class="right"><a target="_top" href="http://github.com/mgalloy/idldoc">IDLdoc project information</a></td>
        </tr>
      </table>
    
    </div>
  </body>
</html>