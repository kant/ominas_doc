<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.6.1 on Mon Oct  3 10:48:11 2016 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>pp_isnumber.pro (OMINAS API Documentation)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="pp_isnumber.pro (OMINAS API Documentation)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">; docformat = 'rst'</span>
<span class="comments">;+</span>
<span class="comments">; :Description:</span>
<span class="comments">;   Tests a string to determine if it can be converted to a floating point number.</span>
<span class="comments">;   All tests are case-insensitive. String must be trimmed on both sides:</span>
<span class="comments">;   if it contains leading or trailing blanks, it is not considered a number.</span>
<span class="comments">;    </span>
<span class="comments">; :Returns:</span>
<span class="comments">;   True if str is a floating point number, or (optionally), NaN or Infinity.</span>
<span class="comments">;   </span>
<span class="comments">;   False otherwise, including if str is undefined or is blank (unless the</span>
<span class="comments">;   keyword blank is set).</span>
<span class="comments">;</span>
<span class="comments">; :Params:</span>
<span class="comments">;    istr : in, required</span>
<span class="comments">;      String or string array to test.</span>
<span class="comments">;</span>
<span class="comments">; :Keywords:</span>
<span class="comments">;    nan : in, optional, default=1</span>
<span class="comments">;      If set, NaN is allowed as a number.</span>
<span class="comments">;    infinity : in, optional, default=1</span>
<span class="comments">;      If set, Infinity is allowed as a number</span>
<span class="comments">;      (any of inf,infi,infin,infini,infinit,infinity).</span>
<span class="comments">;    trim : in, optional, default=1</span>
<span class="comments">;      If set, blanks on the string (on both sides) are ignored (a call is made</span>
<span class="comments">;      to strtrim).</span>
<span class="comments">;    integer : in, optional, default=0</span>
<span class="comments">;      If set, will test for integer numbers, instead of real numbers.</span>
<span class="comments">;    blank : in, optional, default=0</span>
<span class="comments">;      If set, blanks are allowed as numbers</span>
<span class="comments">;    all : in, optional, default=0</span>
<span class="comments">;      If set and the input is an array, pp_isnumber will return a single 0 or 1,</span>
<span class="comments">;      indicating whether every element in the array passed the test.  </span>
<span class="comments">;      </span>
<span class="comments">; :Uses:</span>
<span class="comments">; </span>
<span class="comments">; :Examples:</span>
<span class="comments">; </span>
<span class="comments">; Test some simple cases::</span>
<span class="comments">; </span>
<span class="comments">;   print,pp_isnumber(['a','12','-1','1.8','.9','-.8e-3','NaN','infinity','a12'])</span>
<span class="comments">;   ;   0   1   1   1   1   1   1   1   0</span>
<span class="comments">;   ;print,pp_isnumber(['a','12','-1','1.8','.9','-.8e-3','NaN','infinity','a12'],nan=0,infinity=0)</span>
<span class="comments">;   ;   0   1   1   1   1   1   0   0   0</span>
<span class="comments">;   print,pp_isnumber(['a','12','-1','1.8','.9','-.8e-3','NaN','infinity','a12'],/integer)</span>
<span class="comments">;   ;   0   1   1   0   0   0   0   0   0</span>
<span class="comments">; </span>
<span class="comments">;</span>
<span class="comments">; :Author: Paulo Penteado (pp.penteado@gmail.com), Aug/2009</span>
<span class="comments">;-</span>
<a id="pp_isnumber:source"></a>function pp_isnumber,istr,nan=nan,infinity=infinity,trim=trim,integer=integer,blank=blank,all=all
compile_opt idl2, logical_predicate
<span class="comments">;</span>
<span class="comments">;Defaults</span>
nan=n_elements(nan) eq 1 ? nan : 1B
infinity=n_elements(infinity) eq 1 ? infinity : 1B
trim=n_elements(trim) eq 1 ? trim : 1B
integer=n_elements(integer) eq 1 ? integer : 0B
blank=n_elements(blank) eq 1 ? blank : 0B

nstr=n_elements(istr)
if (nstr eq 0) then return,0
str=trim ? strtrim(istr,2) : istr

if (blank) then begin
  bl=strlen(str) eq 0
endif
if (integer) then begin <span class="comments">;Test for integer</span>
  <span class="comments">;Regular expression to determine if something is an integer number</span>
  intexpr='^[-+]?([0-9]+)$'
  <span class="comments">;Test for integer</span>
  res=stregex(str,intexpr,/boolean)
endif else begin <span class="comments">;Test for floating point number</span>
  <span class="comments">;Regular expression to determine if something is a floating point number</span>
  fpexpr='^[-+]?(([0-9]*\.?[0-9]+)|([0-9]+\.?[0-9]*))([eEdD][-+]?[0-9]+)?$'
  <span class="comments">;Regular expression for NaN</span>
  nanexpr='^[-+]?(nan)$'
  <span class="comments">;Regular expression for Infinity</span>
  infexpr='^[-+]?(inf)i?(in)?(ini)?(init)?(inity)?$'
  <span class="comments">;Test for floating point</span>
  res=stregex(str,fpexpr,/boolean)
  <span class="comments">;Test for NaN</span>
  res=byte(res or (replicate(nan,nstr) and stregex(str,nanexpr,/boolean,/fold_case)))
  <span class="comments">;Test for Infinity</span>
  res=byte(res or (replicate(infinity,nstr) and stregex(str,infexpr,/boolean,/fold_case)))
endelse
if blank then res=res or bl
if keyword_set(all) then res=array_equal(res,1)
return,res
end
</code>
    </div>
  </body>
</html>