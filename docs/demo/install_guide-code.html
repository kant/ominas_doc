<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.6.1 on Thu Oct 27 12:38:28 2016 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>install_guide.pro (OMINAS API Documentation)</title>

    
    <style type="text/css" media="all">
            /* setup page */
      body { font-family: Helvetica, sans-serif; font-size: 12pt; margin: 0; padding: 0; }
      div.content { padding: 1em; }
      p { line-height: 1.4; }
      td p { padding-bottom: 0.5em; }
      img { border: 0; }
      
      /* link styles */
      a { text-decoration: none; }
      a:link, a:visited { color: #0000FF; }
      a:hover, a:focus { background: yellow; border-bottom: 1emx dotted #303099; }
      
      /* dir-overview styles */
      dt.filename { margin-top: 0.5em; }
      dl.file_listing { margin-left: 1em; }
      
      /* titles */
      h1, h2, h3, h4 { font-weight:normal; color: #871E31; margin-top: 1.5em; }
      h4 { margin-bottom: 0.25em; }
      .center { margin-left: auto; margin-right: auto; }
      .small { font-family: Verdana, Helvetica, sans-serif; font-size: 90%; }
      .smaller { font-family: Verdana, Helvetica, sans-serif; font-size: 80%; }
      .smallest { font-family: Verdana, Helvetica, sans-serif; font-size: 70%; }
      h1.basename { margin-top: 0; margin-bottom: 0; }
      h1.basename span.file-attributes { font-size: 70%; margin-left: 3em; color: #384806; }
      h2.directory { font-size: 90%; margin-bottom: 0; }
      h2.routine-name { margin-top: 0; margin-bottom: 0; }
      p.categories { color: #384806; margin-top: 0; }
      span.file_attribute { float: right; color: #384806; margin: 0 0 1em 3em; }
      div#file_comments { margin-top: 1em; }
      
      div.routine-details { border: 1px dotted #C0C0C0; margin-top: 1em; padding: 1em; }
      span.routine-attributes { font-size: 70%; margin-left: 3em; color: #384806; }
      div.details dt { color: #871E31; margin-left: 2em; }
      div.details dt span { color: #384806; margin-left: 2em; }
      div.details dd { margin: 0.5em 2em 1em 4em; }
      a.top {
        font-family: Verdana, Helvetica, sans-serif;
        font-size: 8pt;
        font-weight: bold;
        color: #5070ff;
        text-transform: uppercase;
        float: right;
        margin-left: 1em;
      }
      
      /* comments */
      .pre { white-space: pre; }
      
      /* code styles */
      code { font-family: Monaco, "Courier New", Courier, monospace; font-size: 95%; }
      code.listing { white-space: pre; display: block; margin: 0.75em 0 0.75em 0; padding: 0 3em 0 1em; line-height: 1.4em; }
      code.source { white-space: pre; display: block; }
      code.source span.comments { color: #408080; }
      .syntax { margin-top: 1em; margin-left: 1.5em; text-indent: -1.5em; }
      .var { font-style: italic; }
      .argument { } /* white-space: nowrap; does not work in Safari (and sometimes not even in Firefox) */
      
      dl.routine-summary dt { margin-bottom: 0.25em; }
      dl.routine-summary dd { margin-bottom: 0.5em; margin-left: 2em; }
      
      ul.inherited-method-summary { padding-left: 0em; margin-left: 0em; }
      
      /* general styles */
      ul li { list-style-type: none; }
      table { empty-cells: show; }
      thead { color: #871E31; }
      dd { margin-bottom: 0.35em; }
      input, textarea { background: #F3F6ED; border: #E1D6C6 1px solid; padding: 2px 1em 2px 0.5em; }
      input.text { background: #FFFFC0; }
      
      div.note { margin: 1em 2em 1em 2em; background: #EFEFEF; border: 1px #A0A0A0 dotted; padding: 0 1em 0 1em; }
      p.indent { margin-left: 2em; }
      
      /* An attribute table is a vertical list of name-value pairs. */
      table.box {
        background: #EFEFEF;
        border: 1px #A0A0A0 dotted;
        padding-top: 0.75em;
        padding-bottom: 0.75em;
      }
      table.attribute { padding-left: 0.75em; padding-right: 0.75em; }
      table td { vertical-align: top; }
      table.attribute p { margin: 0; }
      table td.name { font-style: normal; padding-right: 1.5em; }
      ul.fieldslist { padding-top: 0; color: #909090; }
      ul.fieldslist li { margin-bottom: 0.25em; }
      span.fieldname { color: #000000; }
      
      dl.attribute dt { color: #990000; }
      
      /* header/navbar styles */
      div.header { padding: 2em 2em 0 2em; background: #9E9D7B; border-bottom: 2px #262626 solid; }
      div.header h1 { color: white; margin:0; font-weight: normal; }
      div.header h2 { color: white; margin-top: 0; margin-bottom: 1em; font-weight: normal; font-style: italic; font-size: 100%; }
      table.navbar { background: #CCC097; margin: 0; padding: 0; border-bottom: 1px #262626 dotted; width: 100%; }
      table.navbar td { padding: 4px 0.5em 3px 0.5em; white-space: nowrap; vertical-align: top; }
      table.navbar td.flexible { width: 100%; text-align: right; padding-right: 1em; white-space: nowrap; }
      table.navbar td.selected { background: #262626; }
      table.navbar td.selected, table.navbar td.selected a { color: white; }
      table.navbar a:hover, table.navbar a:focus { background: inherit; border-bottom: 1px solid #303099; }
      p.localnavbar { text-align: right; margin: 0.2em 1em 0.2em 0.2em; padding: 0; }
      
      /* CSS graphics styles */
      div.box {
        margin-left: 0.25em;
        display: inline-block;
        width: 0.9em;
        height: 0.9em;
        vertical-align: -1px;
      }
      .red { background-color: #A00; }
      .orange { background-color: #F40; }
      .green { background-color: #480; }
      
      /* index styles */
      span.index_type { margin-left: 1em; }
      dl.index_listing dd { margin-bottom: 0.5em; margin-left: 2em; }
      dl.index_listing dd p { margin-top: 0.2em; margin-bottom: 0em; }
      
      /* search styles */
      fieldset { border: #ddd 1px solid; padding: 1em; margin-top: 3em; }
      legend { color: #871E31; font-size: 120%; }
      label { white-space: nowrap; }
      p.description { margin: 2em 2em 1em 2em; }
      form table td.name { vertical-align: middle; }
      
      /* footer styles */
      div.footer { padding: 0.5em 1em 0.5em 1em; background: #EFEFEF; border-top: 1px #A0A0A0 dotted; }
      div.footer table { width: 100%; }
      div.footer td.right { text-align: right; }

    </style>
    <style type="text/css" media="print">
            p.localnavbar { display: none; }
      
      div.header { background: white; }
      div.header h1 { color: black; }
      div.header h2 { color: black; }

    </style>
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="install_guide.pro (OMINAS API Documentation)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">; docformat = 'rst'</span>
<span class="comments">;==============================================================================</span>
<span class="comments">;+</span>
<span class="comments">;</span>
<span class="comments">;	User Installation Guide </span>
<span class="comments">;	=======================</span>
<span class="comments">;</span>
<span class="comments">;	This guide will cover the installation of OMINAS and common issues with</span>
<span class="comments">;	configuration, as well as present some common errors and possible</span>
<span class="comments">;	solutions. Please see the section entitled `Troubleshooting` for more</span>
<span class="comments">;	information regarding installation issues with OMINAS.</span>
<span class="comments">;</span>
<span class="comments">;	Requirements</span>
<span class="comments">;	============</span>
<span class="comments">;	To process images from a particular mission, that mission's kernels will</span>
<span class="comments">;	need to be downloaded separately from the </span>
<span class="comments">;	`NAIF website &lt;http://naif.jpl.nasa.gov/pub/naif/>`. A set of kernels can</span>
<span class="comments">;	be obtained using the UNIX wget or rsync commands, as desired.It is </span>
<span class="comments">;	recommended to download the set of </span>
<span class="comments">;	`generic_kernels &lt;http://naif.jpl.nasa.gov/pub/naif/generic_kernels/>` to</span>
<span class="comments">;	supplement kernels from other missions.</span>
<span class="comments">;</span>
<span class="comments">;	OMINAS makes use of the NAIF Icy Toolkit to process SPICE kernels. The Icy</span>
<span class="comments">;	toolkit may optionally be obtained manually from </span>
<span class="comments">;	`NAIF &lt;https://naif.jpl.nasa.gov/naif/toolkit_IDL.html>`. However, the</span>
<span class="comments">;	installer utility provided with OMINAS can download and compile Icy</span>
<span class="comments">;	automatically. Installation of Icy is somewhat platform-dependent, so</span>
<span class="comments">;	troubleshooting information can be found in `Troubleshooting`.</span>
<span class="comments">;</span>
<span class="comments">;	Procedure</span>
<span class="comments">;	=========</span>
<span class="comments">;</span>
<span class="comments">;	1. Please ensure that OMINAS has been properly downloaded from the</span>
<span class="comments">;	`Github repository &lt;https://github.com/ppenteado/ominas>` by entering</span>
<span class="comments">;	the following command at the terminal::</span>
<span class="comments">;</span>
<span class="comments">;	 git clone https://github.com/ppenteado/ominas</span>
<span class="comments">;</span>
<span class="comments">;	A local copy of the OMINAS source will be cloned automatically.</span>
<span class="comments">;</span>
<span class="comments">;	2. Configuration of OMINAS should be performed using the configuration</span>
<span class="comments">;	script, configure.sh, which is located in the top-level ominas directory.</span>
<span class="comments">;	This script can be run from the command line with::</span>
<span class="comments">;</span>
<span class="comments">;	 source configure.sh</span>
<span class="comments">;</span>
<span class="comments">;	3. A prompt will appear asking which packages should be installed. The</span>
<span class="comments">;	user should type the numbers of the desired packages separated by spaces.</span>
<span class="comments">;	If no packages are desired, the default package can be installed by typing</span>
<span class="comments">;	"def". Star catalogs or SEDR data may be configured without installing</span>
<span class="comments">;	packages. If no modifications to the package configuration are desired,</span>
<span class="comments">;	the "no" keyword skips this step.</span>
<span class="comments">;</span>
<span class="comments">;	4. Enter the location of the mission kernel pool for each desired</span>
<span class="comments">;	mission package. If the location is not known, or there is a typo,</span>
<span class="comments">;	the utility will attempt to find the kernel pool automatically by using</span>
<span class="comments">;	the default name in the NAIF archive (e.g., Cassini kernels are stored</span>
<span class="comments">;	in a folder called Cassini).</span>
<span class="comments">;</span>
<span class="comments">;	5. The installer will optionally attempt to install the Icy Toolkit from</span>
<span class="comments">;	the internet automatically. If a local copy of Icy is present, its</span>
<span class="comments">;	location may be entered manually or detected automatically. Once Icy</span>
<span class="comments">;	is installed, this step does not need to be performed again if further</span>
<span class="comments">;	modifications to the OMINAS configuration are desired.</span>
<span class="comments">;</span>
<span class="comments">;	6. Test the install of OMINAS has been completed correctly by running the</span>
<span class="comments">;	the following example scripts::</span>
<span class="comments">;</span>
<span class="comments">;	 idl saturn_example.pro</span>
<span class="comments">;	 idl jupiter_example.pro</span>
<span class="comments">;</span>
<span class="comments">;	7. A successful Icy installation can be tested with the following IDL</span>
<span class="comments">;	command::</span>
<span class="comments">;</span>
<span class="comments">;	 help, 'icy', /dlm</span>
<span class="comments">;</span>
<span class="comments">;	Some text on the installed version of Icy should be displayed. Additionally,</span>
<span class="comments">;	use the following command::</span>
<span class="comments">;</span>
<span class="comments">;	 print, cspice_tkvrsn('TOOLKIT')</span>
<span class="comments">;</span>
<span class="comments">;	The version of Icy should be printed. If both of these functions return</span>
<span class="comments">;	successfully, then Icy has been installed correctly.</span>
<span class="comments">;</span>
<span class="comments">;	Note: Demo</span>
<span class="comments">;	==========</span>
<span class="comments">;</span>
<span class="comments">;	If the demo configuration is set for OMINAS, no other types of images can</span>
<span class="comments">;	be processed other than the example scripts. To change this setting at a</span>
<span class="comments">;	later point, run the uninstall.sh script to unconfigure OMINAS, then run</span>
<span class="comments">;	configure.sh again, selecting not to configure the demo.</span>
<span class="comments">;</span>
<span class="comments">;	Alternatively, the following information can be changed in the</span>
<span class="comments">;	`~/.bash_profile' or '~/.bashrc' file::</span>
<span class="comments">;</span>
<span class="comments">;	 DFLAG=true; source &lt;...></span>
<span class="comments">;	</span>
<span class="comments">;	where &lt;...> is the rest of the line. This line should be changed to::</span>
<span class="comments">;</span>
<span class="comments">;	 DFLAG=false; source &lt;...></span>
<span class="comments">;</span>
<span class="comments">;</span>
<span class="comments">;	Troubleshooting</span>
<span class="comments">;	===============</span>
<span class="comments">;</span>
<span class="comments">;	This section outlines several common sources of error which are due to</span>
<span class="comments">;	OMINAS not being configured correctly.</span>
<span class="comments">;</span>
<span class="comments">;	One of the most common configuration problems manifests as this error::</span>
<span class="comments">;</span>
<span class="comments">;	 % CSPICE_STR2ET: SPICE(NOLEAPSECONDS): [str2et_c->STR2ET->TTRANS] The variable that points to the leapseconds (DELTET/DELTA_AT)</span>
<span class="comments">;                  could not be located in the kernel pool.  It is likely that the leapseconds kernel has not been loaded via</span>
<span class="comments">;                  the routine FURNSH.</span>
<span class="comments">;</span>
<span class="comments">;	This error comes from the Icy toolkit. It specifically refers to the Leap</span>
<span class="comments">;	Second Kernel file, however, as the lsk is usually the first kernel which</span>
<span class="comments">;	is loaded, this error generally means that no kernels are being loaded.</span>
<span class="comments">;</span>
<span class="comments">;	You can check which kernels have been loaded by entering the following</span>
<span class="comments">;	IDL commands::</span>
<span class="comments">;</span>
<span class="comments">;	 cspice_ktotal, 'ALL', count</span>
<span class="comments">;	 for i=0,count-1 do begin & cspice_kdata,i,'ALL',file,type,source,handle,found & print,i,file & endfor</span>
<span class="comments">;	</span>
<span class="comments">;	A list will be populated with the currently loaded SPICE kernels, and</span>
<span class="comments">;	their load order. If no kernels are loaded, then it is likely that a bad</span>
<span class="comments">;	path was supplied to the kernel pools. Ensure that the kernel pool was</span>
<span class="comments">;	successfully entered into the environemnt by using the "env" command at</span>
<span class="comments">;	the terminal prompt. The kernel pool variable names follow a convention</span>
<span class="comments">;	like so: &lt;MIS>_SPICE_&lt;*K>, where &lt;MIS> is the abbreviated mission name,</span>
<span class="comments">;	and &lt;*K> is the type of kernel. Therefore, for Cassini, the bash command::</span>
<span class="comments">;</span>
<span class="comments">;	 env | grep CAS_SPICE</span>
<span class="comments">;</span>
<span class="comments">;	will list the path to directories containing each type of Cassini kernel.</span>
<span class="comments">;	If the variables are not present, then run the de-configuring utility, in</span>
<span class="comments">;	the ominas folder::</span>
<span class="comments">;</span>
<span class="comments">;	 source uninstall.sh</span>
<span class="comments">;</span>
<span class="comments">;	Then run the configuration utility again. Any custom path name supplied to</span>
<span class="comments">;	the configuration utility must be spelled correctly.</span>
<span class="comments">;</span>
<span class="comments">;	If the kernel environment variables are present, next check that the kernel</span>
<span class="comments">;	list contains the correct kernels. The kernel list file manually specifies</span>
<span class="comments">;	which kernels should be loaded in place of the OMINAS auto-detect</span>
<span class="comments">;	functionaliy. For Cassini, as an example, this file is located in</span>
<span class="comments">;	'ominas/config/cas/cassini.kernels'. At the beginning of this file, after</span>
<span class="comments">;	the header comments, check that the following line is present::</span>
<span class="comments">;</span>
<span class="comments">;	 $CAS_SPICE_LSK/naif00xx.tls</span>
<span class="comments">;</span>
<span class="comments">;	where xx is the number of the most recent leap second kernel file.</span>
<span class="comments">;</span>
<span class="comments">;</span>
<span class="comments">;	If no SPK kernels are loaded, the following error will be returned by Icy::</span>
<span class="comments">;</span>
<span class="comments">;	 % CSPICE_SPKGEO: SPICE(NOLOADEDFILES): [spkgeo_c->SPKGEO->SPKSFS] At least one SPK file needs to be loaded by SPKLEF before</span>
<span class="comments">;                  beginning a search.</span>
<span class="comments">;</span>
<span class="comments">;	The SPK kernels must be loaded from a mission kernel list. If they are not</span>
<span class="comments">;	being loaded correctly, then the kernel list is not being read as expected,</span>
<span class="comments">;	usually this is due to an incorrect kernel list path.</span>
<span class="comments">;</span>
<span class="comments">;</span>
<span class="comments">;	In some cases, a demo script will run and no error will appear to occur,</span>
<span class="comments">;	but no pointing will be overlayed on the image. This error generally occurs</span>
<span class="comments">;	due to the PCK kernels not being loaded or the CK kernels not being loaded</span>
<span class="comments">;	in the correct order.</span>
<span class="comments">;</span>
<span class="comments">;</span>
<span class="comments">;	When the frame kernel (FK) is not being loaded correctly for an image,</span>
<span class="comments">;	Icy will return the following error::</span>
<span class="comments">;</span>
<span class="comments">;	 % CSPICE_PXFORM: SPICE(EMPTYSTRING): [pxform_c] String "from" has length zero.</span>
<span class="comments">;</span>
<span class="comments">;	This error can be corrected by adding the following line to the kernel</span>
<span class="comments">;	list, after the LSK kernel line, in this example for Cassini::</span>
<span class="comments">;</span>
<span class="comments">;	 $CAS_SPICE_FK/cas_iss_vXX.tf</span>
<span class="comments">;</span>
<span class="comments">;	where XX is the most recent FK version.</span>
<span class="comments">;</span>
<span class="comments">;</span>
<span class="comments">;	Occasionally, in the course of modifying the OMINAS configuration without</span>
<span class="comments">;	performing a fresh uninstall and reconfigure, the "load order" of the</span>
<span class="comments">;	packages may be incorrect. When running a demo, the following error may</span>
<span class="comments">;	occur::</span>
<span class="comments">;</span>
<span class="comments">;	 % Illegal variable attribute: POINTS_P.</span>
<span class="comments">;</span>
<span class="comments">;	This can be corrected either by running the uninstall script, and then</span>
<span class="comments">;	the configuration script, or manually by editing the bash_profile or</span>
<span class="comments">;	bashrc for the user account::</span>
<span class="comments">;</span>
<span class="comments">;	 vim ~/.bash_profile</span>
<span class="comments">;	After editing the file to ensure that ominas_env_def.sh is the first file</span>
<span class="comments">;	which is loaded, refresh the profile::</span>
<span class="comments">;	 . ~/.bash_profile</span>
<span class="comments">;</span>
<span class="comments">;</span>
<span class="comments">;	If Icy is not installed, and a script is run, something similar to the</span>
<span class="comments">;	following error may occur::</span>
<span class="comments">;</span>
<span class="comments">;	 % Attempt to call undefined procedure: 'CSPICE_STR2ET'.</span>
<span class="comments">;</span>
<span class="comments">;	In general, the undefined procudure may have any cspice prefix. Icy is</span>
<span class="comments">;	either not configured correctly, or not installed. In IDL, check that</span>
<span class="comments">;	the Icy path has been added to the IDL path as follows::</span>
<span class="comments">;</span>
<span class="comments">;	 path = pref_get('IDL_PATH')</span>
<span class="comments">;	 print, path</span>
<span class="comments">;	 dlm_path = pref_get('IDL_DLM_PATH')</span>
<span class="comments">;	 print, dlm_path</span>
<span class="comments">;</span>
<span class="comments">;	The path variable should appear as a colon-separated list with</span>
<span class="comments">;	&lt;IDL_DEFAULT> as the first entry. Check that both Icy and OMINAS</span>
<span class="comments">;	directories are added to the IDL_PATH, and that Icy is added to the</span>
<span class="comments">;	IDL_DLM_PATH. If Icy is not present in the list, it can be added with</span>
<span class="comments">;	these IDL commands::</span>
<span class="comments">;</span>
<span class="comments">;	 path = path + ':+path/to/icy'</span>
<span class="comments">;	 pref_set, 'IDL_PATH', path, /commit</span>
<span class="comments">;	 dlm_path = dlm_path + ':+path/to/icy'</span>
<span class="comments">;	 pref_set, 'IDL_DLM_PATH', dlm_path, /commit</span>
<span class="comments">;</span>
<span class="comments">;	You must exit and restart IDL for these changes to take effect.</span>
<span class="comments">;</span>
<span class="comments">;</span>
<span class="comments">;	When the incorrect kernels are being loaded, an error like this may appear,</span>
<span class="comments">;	this particular error comes from mosaic_example.pro::</span>
<span class="comments">;</span>
<span class="comments">;	 % Variable is undefined: MU0.</span>
<span class="comments">;	 % Execution halted at: PG_PHOTOM_GLOBE   159 path/to/ominas/nv/com/pg/pg_photom_globe.pro</span>
<span class="comments">;	 %                      PG_PHOTOM          99 path/to/ominas/nv/com/pg/pg_photom.pro</span>
<span class="comments">;	 %                      $MAIN$          </span>
<span class="comments">;</span>
<span class="comments">;	This error occurs when the incorrect kernel list is being used. Generally,</span>
<span class="comments">;	when processing a Cassini or other mission image, the demo should be turned</span>
<span class="comments">;	off through the configuration utility. If it is on, the demo kernel list</span>
<span class="comments">;	will be called, along with the demo translator. This setup will prevent</span>
<span class="comments">;	OMINAS from auto-detecting the correct kernels to load for the image.</span>
<span class="comments">;</span>
<span class="comments">;</span>
<span class="comments">;	A simple mistake that might be made can manifest in the following manner::</span>
<span class="comments">;</span>
<span class="comments">;	 -1</span>
<span class="comments">;	 % Variable is undefined: DD.</span>
<span class="comments">;</span>
<span class="comments">;	Note that OMINAS batch scripts must be opened from the directory from </span>
<span class="comments">;	which they are located.</span>
<span class="comments">;</span>
<span class="comments">;-</span>

<a id="install_guide:source"></a>pro install_guide
<span class="comments">;dummy procedure</span>
end
<span class="comments">;==============================================================================</span>
</code>
    </div>
  </body>
</html>